<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Catalogue Solustoc ‚Äì Bijoux √† la pi√®ce pour revendeurs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; color: #222; }
    header { background: #111; color: #fff; padding: 18px 10px; text-align: center; }
    header h1 { margin: 0; font-size: 22px; }
    header p { margin: 4px 0 0; font-size: 14px; color: #ddd; }

    .wrapper { width: 94%; max-width: 1100px; margin: 18px auto 40px; }

    .hero {
      background: #ffffff;
      border-radius: 12px;
      padding: 18px 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.06);
      margin-bottom: 18px;
      text-align: center;
    }
    .hero h2 { margin-top: 0; font-size: 20px; }
    .hero p { margin: 6px 0; font-size: 14px; }

    .badge-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      font-size: 13px;
    }
    .badge {
      background: #f0e6d5;
      border-radius: 999px;
      padding: 4px 10px;
      display: inline-flex;
      align-items: center;
    }

    .section-title { margin: 24px 0 10px; font-size: 18px; font-weight: bold; }

    /* üîé FILTRES (cat√©gorie + recherche) */
    .filters {
      margin: 6px 0 16px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      font-size: 14px;
    }
    .filters label {
      font-weight: bold;
    }
    .filters select,
    .filters input {
      padding: 6px 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 14px; }

    .card {
      background: #ffffff;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
      padding: 10px 10px 12px;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .card img {
      width: 100%;
      height: 170px;
      object-fit: cover;   /* si tu veux carr√© parfait: mets 200px ici */
      border-radius: 8px;
      margin-bottom: 8px;
      background: #ddd;
      cursor: pointer;
    }

    .card h3 { font-size: 15px; margin: 4px 0 6px; min-height: 38px; }

    .price-line { font-size: 14px; margin: 2px 0; }
    .price-solustoc { font-weight: bold; color: #b32121; }
    .stock { font-size: 13px; color: #555; margin-top: 2px; }

    .btn-small {
      margin-top: 8px;
      padding: 8px 10px;
      font-size: 14px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      background: #25D366;
      color: #fff;
      width: 100%;
    }
    .btn-small:hover { background: #1ebe5c; }

    footer { text-align: center; font-size: 12px; color: #777; padding: 24px 10px 28px; }

    /* Quantit√© */
    .qty-minus, .qty-plus {
      width: 30px;
      height: 30px;
      border-radius: 6px;
      font-size: 18px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      background: #e6e6e6;
    }
    .qty-minus:hover, .qty-plus:hover { background: #d3d3d3; }
    .qty-value { font-size: 16px; font-weight: bold; }

    /* Panier */
    .cart-block {
      background: #ffffff;
      border-radius: 12px;
      padding: 18px 14px 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.06);
      margin-top: 26px;
    }
    table.cart-table { width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 8px; }
    table.cart-table th, table.cart-table td {
      padding: 4px 6px;
      border-bottom: 1px solid #eee;
      text-align: left;
    }
    .cart-total { margin-top: 10px; font-weight: bold; text-align: right; font-size: 14px; }

    .cart-actions {
      margin-top: 14px;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .btn-main {
      padding: 11px 14px;
      border-radius: 999px;
      border: none;
      font-size: 15px;
      font-weight: bold;
      cursor: pointer;
      color: #fff;
      background: #25D366;
    }
    .btn-main[disabled] { opacity: 0.5; cursor: not-allowed; }

    .btn-secondary {
      padding: 8px 12px;
      border-radius: 999px;
      border: none;
      font-size: 13px;
      cursor: pointer;
      background: #f0f0f0;
      color: #333;
    }

    .lightbox { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; z-index: 9999; }
    .lightbox img { max-width: 90%; max-height: 90%; border-radius: 8px; }
    .lightbox-close { position: fixed; top: 14px; right: 20px; font-size: 26px; color: #fff; cursor: pointer; font-weight: bold; }

    @media (max-width: 600px) { .card img { height: 150px; } }
  </style>
</head>

<body>
<header>
  <h1>Solustoc ‚Äì Bijoux √† la pi√®ce pour revendeurs</h1>
  <p>Composez votre propre s√©lection de bijoux en acier inoxydable dor√© √† l‚Äôor fin</p>
</header>

<div class="wrapper">

  <section class="hero">
    <h2>Choisissez vos bijoux √† l‚Äôunit√©</h2>
    <p>S√©lectionnez les r√©f√©rences, ajoutez-les au panier puis envoyez le r√©capitulatif via WhatsApp.</p>
    <p><strong>Livraison gratuite d√®s 200 ‚Ç¨ TTC.</strong></p>
    <div class="badge-row">
      <span class="badge">üíé Acier inoxydable dor√© √† l‚Äôor fin</span>
      <span class="badge">üì¶ Stock r√©el contr√¥l√©</span>
      <span class="badge">üöö Livraison rapide en France</span>
      <span class="badge">üá´üá∑ Soci√©t√© fran√ßaise ‚Äì facture fournie</span>
    </div>
  </section>

  <h2 class="section-title">Bijoux disponibles √† la pi√®ce</h2>

  <!-- üîé Filtres catalogue -->
  <div class="filters">
    <label for="filter-category">Filtrer :</label>
    <select id="filter-category">
      <option value="">Toutes les cat√©gories</option>
    </select>
    <input id="search-input" type="text" placeholder="Rechercher un bijou...">
  </div>

  <section id="products" class="grid"></section>

  <section class="cart-block" id="cart-block">
    <h2>Votre s√©lection de bijoux</h2>
    <div class="cart-info">
      Ajoutez les bijoux puis envoyez la commande via WhatsApp.
      Livraison offerte d√®s 200 ‚Ç¨ TTC.
    </div>
    <div id="cart-content">
      <p style="text-align:center; font-size:13px; color:#555;">Aucun bijou dans votre s√©lection pour le moment.</p>
    </div>
    <div class="cart-actions">
      <button id="btn-whatsapp" class="btn-main" disabled>üì≤ Envoyer la commande via WhatsApp</button>
      <button id="btn-clear" class="btn-secondary">üóëÔ∏è Vider la s√©lection</button>
    </div>
  </section>

</div>

<footer>Solustoc ‚Ä¢ D√©stockage pour les pros ‚Ä¢ Bijoux en acier inoxydable dor√© √† l‚Äôor fin</footer>

<div class="lightbox" id="lightbox">
  <span class="lightbox-close" id="lightbox-close">√ó</span>
  <img id="lightbox-img" src="" alt="">
</div>

<!-- ================== SCRIPT CATALOGUE / PANIER ================== -->
<script>
const PHOTO_BASE = "../photo/";

/* üëâ ICI tu gardes TA LISTE COMPLETE de produits
   (celle qui fonctionne avec toutes les photos)
   Je mets juste 2 exemples pour la structure : */
const produits = [
  { nom: "Bracelet Love You", prix: 1.80, stock: 6, image: "Bracelet Love you -1-portrait-748w.webp" },
  { nom: "M√©daille Symbole Dor√© Plume", prix: 1.80, stock: 52, image: "medaille-symbole-dore-plume.webp" },
  /* üëâ remets ici toutes TES autres lignes comme dans ton code correct 1924 */
];

let cart = [];

/* Quantit√© par carte */
function changeQty(i, delta) {
  const el = document.getElementById("qty-" + i);
  let value = parseInt(el.textContent);
  value = value + delta;
  if (value < 1) value = 1;
  el.textContent = value;
}

/* Ajouter au panier */
function addToCart(index, qty = 1) {
  qty = parseInt(qty);
  if (qty < 1) return;
  const p = produits[index];
  const exist = cart.find(i => i.nom === p.nom);
  if (exist) exist.qty += qty;
  else cart.push({ nom: p.nom, prix: p.prix, qty });
  renderCart();
}

/* Bouton vider */
document.getElementById("btn-clear").onclick = () => { cart = []; renderCart(); };

/* Envoyer WhatsApp */
document.getElementById("btn-whatsapp").onclick = () => {
  if (!cart.length) return;
  let msg = "üõçÔ∏è *Commande de bijoux Solustoc*\n\n";
  cart.forEach(i => msg += `‚Ä¢ ${i.nom} √ó ${i.qty} ‚Äî ${i.prix}‚Ç¨\n`);
  const total = cart.reduce((s, i) => s + i.prix * i.qty, 0);
  msg += `\nüì¶ Total : *${total.toFixed(2)} ‚Ç¨ TTC*`;
  window.open("https://wa.me/33756923323/?text=" + encodeURIComponent(msg), "_blank");
};

/* Affichage catalogue */
function renderProduits() {
  const container = document.getElementById("products");
  container.innerHTML = produits.map((p, i) => `
    <div class="card">
      <img src="${PHOTO_BASE + p.image}" onclick="openLightbox('${PHOTO_BASE + p.image}')">
      <h3>${p.nom}</h3>
      <p class="price-line"><span class="price-solustoc">${p.prix.toFixed(2)} ‚Ç¨ TTC</span></p>
      <p class="stock">Stock : ${p.stock}</p>
      <div style="display:flex; justify-content:center; align-items:center; gap:8px; margin-top:6px;">
        <button class="qty-minus" onclick="changeQty(${i}, -1)">‚àí</button>
        <span id="qty-${i}" class="qty-value">1</span>
        <button class="qty-plus" onclick="changeQty(${i}, 1)">+</button>
      </div>
      <button class="btn-small" onclick="addToCart(${i}, document.getElementById('qty-${i}').textContent)">Ajouter</button>
    </div>
  `).join("");

  // Apr√®s rendu, on initialise/rafra√Æchit les filtres (au cas o√π)
  initCatalogueFilters();
}

/* Panier */
function renderCart() {
  const cartBlock = document.getElementById("cart-content");
  if (!cart.length) {
    cartBlock.innerHTML = `<p style="text-align:center; font-size:13px; color:#555;">Aucun bijou dans votre s√©lection pour le moment.</p>`;
    document.getElementById("btn-whatsapp").disabled = true;
    return;
  }
  cartBlock.innerHTML = `
    <table class="cart-table">
      <tr><th>Article</th><th>Qt√©</th><th>Total</th></tr>
      ${
        cart.map(i =>
          `<tr><td>${i.nom}</td><td>${i.qty}</td><td>${(i.qty * i.prix).toFixed(2)} ‚Ç¨</td></tr>`
        ).join("")
      }
    </table>
    <p class="cart-total">Total : ${cart.reduce((s, i) => s + i.prix * i.qty, 0).toFixed(2)} ‚Ç¨ TTC</p>
  `;
  document.getElementById("btn-whatsapp").disabled = false;
}

/* Lightbox */
function openLightbox(src) {
  document.getElementById("lightbox-img").src = src;
  document.getElementById("lightbox").style.display = "flex";
}
document.getElementById("lightbox-close").onclick = () => {
  document.getElementById("lightbox").style.display = "none";
};

/* ========= FILTRES : cat√©gorie + recherche ========= */

/* Cat√©gorie √† partir du titre (si tu n'as pas encore mis de vraie cat√©gorie dans les donn√©es) */
function inferCategoryFromLabel(label) {
  const t = label.toLowerCase().replace("‚Äô", "'");
  if (t.startsWith("m√©daille symbole")) return "M√©dailles symboles";
  if (t.startsWith("m√©daille initiale")) return "M√©dailles initiales";
  if (t.startsWith("m√©daille pompon"))  return "M√©dailles pompons";
  if (t.startsWith("m√©daille pampille"))return "M√©dailles pampilles";
  if (t.startsWith("m√©daille pr√©cieuse"))return "M√©dailles pr√©cieuses";
  if (t.startsWith("m√©daille bijou"))   return "M√©dailles bijoux";
  if (t.startsWith("cordon"))           return "Cordons";
  if (t.startsWith("collier"))          return "Colliers";
  if (t.startsWith("bracelet"))         return "Bracelets";
  if (t.startsWith("boucles d'oreilles")) return "Boucles d‚Äôoreilles";
  if (t.startsWith("bague"))            return "Bagues";
  return "Autres";
}

function initCatalogueFilters() {
  const cards = Array.from(document.querySelectorAll("#products .card"));
  const select = document.getElementById("filter-category");
  const searchInput = document.getElementById("search-input");
  if (!cards.length || !select || !searchInput) return;

  // On vide les options sauf "Toutes les cat√©gories"
  select.querySelectorAll("option:not([value=''])").forEach(o => o.remove());

  const catsSet = new Set();

  cards.forEach(card => {
    const titleEl = card.querySelector("h3");
    const title = titleEl ? titleEl.textContent.trim() : "";
    const cat = inferCategoryFromLabel(title);
    card.dataset.category = cat;
    card.dataset.title = title.toLowerCase();
    catsSet.add(cat);
  });

  Array.from(catsSet).sort().forEach(cat => {
    const opt = document.createElement("option");
    opt.value = cat;
    opt.textContent = cat;
    select.appendChild(opt);
  });

  function applyFilters() {
    const selected = select.value;
    const term = searchInput.value.toLowerCase().trim();
    cards.forEach(card => {
      const cardCat = card.dataset.category || "";
      const cardTitle = card.dataset.title || "";
      const matchCat = !selected || cardCat === selected;
      const matchSearch = !term || cardTitle.includes(term);
      card.style.display = (matchCat && matchSearch) ? "" : "none";
    });
  }

  select.onchange = applyFilters;
  searchInput.oninput = applyFilters;
}

/* GO */
renderProduits();
renderCart();

window.addEventListener("load", initCatalogueFilters);
</script>

</body>
</html>
